<% layout('layouts/boilerplate') %>
<div class="container">
    <div class="row align-items-center justify-content-around">
        <% if (user.picture) { %>
            <div class="col-md-6">
                <img src=<%= user.picture.image.srcUrl %> class="img-fluid" style="max-width: 100%;" alt=""/>
            </div>
            <div class="col-5">
                <form method="POST" action="/users/update/<%= user._id %>" autocomplete="off" class="validated-form" novalidate enctype="multipart/form-data">
                    <div class="form-group container">
                        <div class="column">
                            <div class="row mb-2">
                                <label for="name">Name:</label>
                                <input type="text" name="name" class="form-control" value="<%= user.name %>" required autofocus />
                            </div>
                            <div class="row mb-2">
                                <label for="email">Email:</label>
                                <input type="text" name="email" class="form-control" value="<%= user.email %>" required />
                            </div>
                            <div class="row mb-2">
                                <label for="interests">Interests:</label>
                                <input type="text" name="interests" class="form-control" value="<%= user.interests %>" required />
                            </div>
                            <div class="row">
                                <% if (user.picture) { %>
                                    <p>Current picture: <%= user.picture.name %></p>
                                <% } %>
                            </div>
                            <div class="row">
                                <label for="image">New picture:</label>
                            </div>
                            <div class="row">
                                <input type="file" name="image" accept="image/*">
                            </div>
                            </div>
                            <div class="mt-3 row justify-content-around">
                                <div class="column">
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                </div>
                                <div class="column">
                                    <a class="btn btn-primary" href="/users">All profiles</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        <% } else { %>
            <div class="col-12">
                <form method="POST" action="/users/update/<%= user._id %>" autocomplete="off" class="validated-form" novalidate enctype="multipart/form-data">
                    <div class="form-group container">
                        <div class="column">
                            <div class="row mb-2">
                                <label for="name">Name:</label>
                                <input type="text" name="name" class="form-control" value="<%= user.name %>" required autofocus />
                            </div>
                            <div class="row mb-2">
                                <label for="email">Email:</label>
                                <input type="text" name="email" class="form-control" value="<%= user.email %>" required />
                            </div>
                            <div class="row mb-2">
                                <label for="interests">Interests:</label>
                                <input type="text" name="interests" class="form-control" value="<%= user.interests %>" required />
                            </div>
                            <div class="row">
                                <% if (user.picture) { %>
                                    <p>Current picture: <%= user.picture.name %></p>
                                <% } %>
                            </div>
                            <div class="row">
                                <label for="image">New picture:</label>
                            </div>
                            <div class="row">
                                <input type="file" name="image" accept="image/*">
                            </div>
                            </div>
                            <div class="mt-3 row justify-content-around">
                                <div class="column">
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                </div>
                                <div class="column">
                                    <a class="btn btn-primary" href="/users">All profiles</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        <% } %>
    </div>
</div>
